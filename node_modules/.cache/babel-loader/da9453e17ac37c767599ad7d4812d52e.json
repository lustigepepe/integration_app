{"ast":null,"code":"function createNewRow() {\n  var newForm = document.createElement('form'),\n      target = document.querySelector('div#ad-units'),\n      inner = '<div class=\\\"mdl-textfield mdl-js-textfield\\\">\\r\\n\\t<input class=\\\"mdl-textfield__input\\\" type=\\\"text\\\" id=\\\"sample1\\\">\\r\\n\\t<label class=\\\"mdl-textfield__label\\\" for=\\\"sample1\\\">sitename-lb<\\/label>\\r\\n<\\/div>\\r\\n<div class=\\\"mdl-textfield mdl-js-textfield\\\">\\r\\n\\t<input class=\\\"mdl-textfield__input\\\" type=\\\"text\\\" id=\\\"sample1\\\">\\r\\n\\t<label class=\\\"mdl-textfield__label\\\" for=\\\"sample1\\\">728x90,970x250,320x50<\\/label>\\r\\n<\\/div>\\r\\n<div class=\\\"mdl-textfield mdl-js-textfield\\\">\\r\\n\\t<input class=\\\"mdl-textfield__input\\\" type=\\\"text\\\" id=\\\"sample1\\\">\\r\\n\\t<label class=\\\"mdl-textfield__label\\\" for=\\\"sample1\\\">uap-sitename, wp-sitename<\\/label>\\r\\n<\\/div>';\n  newForm.innerHTML = inner;\n  target.appendChild(newForm);\n}\n\nfunction removeComma(string) {\n  var removed = string.replace(/,/g, ';');\n  return removed;\n}\n\nexport const generateCsv = rowData => {\n  var data = [],\n      globalPlacemnt = document.forms[0][0].value,\n      formData = document.querySelectorAll('#ad-units form');\n  rowData.forEach((ob, index) => {\n    console.log('rowData', ob, index);\n  });\n\n  for (i = 0; i < formData.length; i++) {\n    dataRow = []; //AD CODE and NAME\n\n    dataRow.push(formData[i][0].value);\n    dataRow.push(formData[i][0].value); //sizes\n\n    dataRow.push(removeComma(formData[i][1].value));\n    dataRow.push(','); //placements\n    //case1: global placemnts + ad unit placement\n\n    if (document.forms[0][0].value != \"\" && formData[i][2].value != \"\") {\n      dataRow.push(removeComma(document.forms[0][0].value + ',' + formData[i][2].value));\n    } //case2: no global placement + ad unit placement\n    else if (document.forms[0][0].value == \"\" && formData[i][2].value != \"\") {\n        dataRow.push(removeComma(formData[i][2].value));\n      } //case3: global placement + no ad unit placement;\n      else if (document.forms[0][0].value != \"\" && formData[i][2].value == \"\") {\n          dataRow.push(removeComma(document.forms[0][0].value));\n        }\n\n    dataRow.push('_blank,');\n    data.push(dataRow);\n  }\n\n  console.log(data);\n  var csv = '';\n  data.forEach(function (row) {\n    csv += row.join(',');\n    csv += \"\\n\";\n  });\n  console.log(csv);\n  var hiddenElement = document.createElement('a');\n  hiddenElement.href = 'data:application/octet-stream,' + encodeURIComponent(csv);\n  hiddenElement.target = '_blank';\n  hiddenElement.download = 'BulkUnits.csv';\n  hiddenElement.click();\n};","map":{"version":3,"sources":["/Users/hagen.handtke/Documents/urban_integration/src/services/CsvGenerationService.js"],"names":["createNewRow","newForm","document","createElement","target","querySelector","inner","innerHTML","appendChild","removeComma","string","removed","replace","generateCsv","rowData","data","globalPlacemnt","forms","value","formData","querySelectorAll","forEach","ob","index","console","log","i","length","dataRow","push","csv","row","join","hiddenElement","href","encodeURIComponent","download","click"],"mappings":"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","sourcesContent":["function createNewRow() {\n    var newForm = document.createElement('form'),\n        target = document.querySelector('div#ad-units'),\n        inner = '<div class=\\\"mdl-textfield mdl-js-textfield\\\">\\r\\n\\t<input class=\\\"mdl-textfield__input\\\" type=\\\"text\\\" id=\\\"sample1\\\">\\r\\n\\t<label class=\\\"mdl-textfield__label\\\" for=\\\"sample1\\\">sitename-lb<\\/label>\\r\\n<\\/div>\\r\\n<div class=\\\"mdl-textfield mdl-js-textfield\\\">\\r\\n\\t<input class=\\\"mdl-textfield__input\\\" type=\\\"text\\\" id=\\\"sample1\\\">\\r\\n\\t<label class=\\\"mdl-textfield__label\\\" for=\\\"sample1\\\">728x90,970x250,320x50<\\/label>\\r\\n<\\/div>\\r\\n<div class=\\\"mdl-textfield mdl-js-textfield\\\">\\r\\n\\t<input class=\\\"mdl-textfield__input\\\" type=\\\"text\\\" id=\\\"sample1\\\">\\r\\n\\t<label class=\\\"mdl-textfield__label\\\" for=\\\"sample1\\\">uap-sitename, wp-sitename<\\/label>\\r\\n<\\/div>';\n\n    newForm.innerHTML = inner;\n    target.appendChild(newForm);\n}\n\nfunction removeComma(string) {\n    var removed = string.replace(/,/g, ';');\n    return removed;\n}\n\nexport const generateCsv = (rowData) => {\n\n    var data = [],\n        globalPlacemnt = document.forms[0][0].value,\n        formData = document.querySelectorAll('#ad-units form')\n\n\n    rowData.forEach((ob, index) => {\n        console.log('rowData', ob, index);\n    });\n    for (i = 0; i < formData.length; i++) {\n        dataRow = []\n        //AD CODE and NAME\n        dataRow.push(formData[i][0].value)\n        dataRow.push(formData[i][0].value)\n\n        //sizes\n        dataRow.push(removeComma(formData[i][1].value))\n        dataRow.push(',')\n\n        //placements\n        //case1: global placemnts + ad unit placement\n        if (document.forms[0][0].value != \"\" && formData[i][2].value != \"\") {\n            dataRow.push(removeComma((document.forms[0][0].value + ',' + formData[i][2].value)))\n        }\n        //case2: no global placement + ad unit placement\n        else if (document.forms[0][0].value == \"\" && formData[i][2].value != \"\") {\n            dataRow.push(removeComma(formData[i][2].value));\n        }\n        //case3: global placement + no ad unit placement;\n        else if (document.forms[0][0].value != \"\" && formData[i][2].value == \"\") {\n            dataRow.push(removeComma(document.forms[0][0].value));\n        }\n        dataRow.push('_blank,')\n\n        data.push(dataRow);\n\n    }\n    console.log(data)\n\n    var csv = '';\n    data.forEach(function (row) {\n        csv += row.join(',');\n        csv += \"\\n\";\n    });\n\n    console.log(csv);\n    var hiddenElement = document.createElement('a');\n    hiddenElement.href = 'data:application/octet-stream,' + encodeURIComponent(csv);\n    hiddenElement.target = '_blank';\n    hiddenElement.download = 'BulkUnits.csv';\n    hiddenElement.click();\n}"]},"metadata":{},"sourceType":"module"}