{"ast":null,"code":"import _toConsumableArray from\"/Users/hagen.handtke/Documents/urban_integration/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"/Users/hagen.handtke/Documents/urban_integration/node_modules/@babel/runtime/helpers/esm/defineProperty\";var _rop,_orNot;import{bidder}from'./Helper';//ROP\nvar rop=(_rop={\"120x600\":\"2146125\",\"160x600\":\"2146128\",\"200x600\":\"2146127\",\"300x100\":\"3562558\",\"300x250\":\"2146130\"},_defineProperty(_rop,\"300x250\",\"3562949\"),_defineProperty(_rop,\"300x50\",\"3562561\"),_defineProperty(_rop,\"300x600\",\"2146129\"),_defineProperty(_rop,\"320x100\",\"3561911\"),_defineProperty(_rop,\"320x480\",\"3562349\"),_defineProperty(_rop,\"320x50\",\"3562953\"),_defineProperty(_rop,\"728x90\",\"3889479\"),_defineProperty(_rop,\"800x250\",\"3889481\"),_defineProperty(_rop,\"970x250\",\"2146124\"),_defineProperty(_rop,\"970x90\",\"2146126\"),_rop);//news\nvar orNot=(_orNot={\"120x600\":\"2227039\",\"160x600\":\"2227040\",\"200x600\":\"2227038\",\"300x100\":\"3562555\",\"300x250\":\"2146133\"},_defineProperty(_orNot,\"300x250\",\"3889480\"),_defineProperty(_orNot,\"300x50\",\"3563072\"),_defineProperty(_orNot,\"300x600\",\"3889482\"),_defineProperty(_orNot,\"320x100\",\"2146134\"),_defineProperty(_orNot,\"320x480\",\"3562552\"),_defineProperty(_orNot,\"320x50\",\"3561904\"),_defineProperty(_orNot,\"728x90\",\"2227036\"),_defineProperty(_orNot,\"800x250\",\"2227037\"),_defineProperty(_orNot,\"970x250\",\"2227035\"),_defineProperty(_orNot,\"970x90\",\"2455011\"),_orNot);//criteo\nvar sizesInConfig=[{size:'300x250',pl:'medrect1'},{size:'300x250',pl:'medrect2'},{size:'728x90',pl:'leader'},{size:'320x100',pl:'leader'}];//hier slot Definitionen rein:\nvar slots=[{unit:\"leaderboard\",initiallyExpanded:true,size:[[728,90],[300,50],[300,100],[320,50],[320,100]],sizeMapping:[[[0,0],[[300,50],[300,100],[320,50],[320,100]]],[[601,0],[[1,1],[728,90]]]],targeting:{pos:\"ATF\"}},{unit:\"medrect1\",initiallyExpanded:true,size:[[300,250],'fluid'],sizeMapping:[[[0,0],[[300,50],[300,250],[300,100],[320,50],[320,100],'fluid']],[[601,0],[[1,1],[300,250]]]]},{unit:\"medrect2\",initiallyExpanded:true,size:[[300,250],'fluid']},{unit:\"post-site-ad\",size:\"out-of-page\"},{unit:\"medrect1-mobile\",initiallyExpanded:true,size:[[300,250]],sizeMapping:[[[0,0],[[300,250]]],[[768,0],[]]]}];function containsObject(obj,list){var i;for(i=0;i<list.length;i++){if(list[i]===obj){return true;}}return false;}var generateParamAttributes=function generateParamAttributes(params,bidderName,pageName){params.placementnameing='';params.addStringtocall=[];switch(bidderName){case bidder.CRITEO:params.addStringtocall.push(['networkId',3724],['publisherSubId',pageName]);break;case bidder.YIELDLAB:params.placementnameing='adslotId';params.addStringtocall.push(['supplyId',2117490],['extId',pageName]);break;}};var createBidderConfigOb=function createBidderConfigOb(bidderName,sizes,pageName){var bidderConfObject={};var params={};params.sizes=sizes;generateParamAttributes(params,bidderName,pageName);bidderConfObject.bidder=bidderName;bidderConfObject.params=params;return bidderConfObject;};var criteoTrans=function criteoTrans(config,pageName){config.forEach(function(el){delete el.id;});return createBidderConfigOb(bidder.CRITEO,config,pageName);};var yieldlabTrans=function yieldlabTrans(input,yieldlabIds){var config=input.config,slots=input.slots,pageName=input.pageName;var sizes=[];config.forEach(function(item){//console.log(\"checking \" + item.pl)\nslots.forEach(function(elem){var abort=false;if(elem.unit.indexOf(item.pl)>-1){//console.log(\"check for elem successful. checking sizes\")\n//console.log(elem)\n//check for sizeMappings\nif(elem.sizeMapping){for(var i=0;i<elem.sizeMapping.length&&!abort;i++){//console.log(\"checking row \"+ (i+1)+\" of \"+elem.sizeMapping.length)\nvar row=elem.sizeMapping[i][1];//eigene Funktion machen, wird sowohl bei SizeMapping ohne benutzt\nfor(var k=0;k<row.length&&!abort;k++){var currSize=row[k][0].toString()+\"x\"+row[k][1].toString();if(currSize==item.size){//console.log(\"configSize in row. pushing to variable and abort loop\");\nvar abort=true;var rowArr=[];row.forEach(function(rowSize){rowArr.push(rowSize[0].toString()+\"x\"+rowSize[1].toString());});for(z=0;z<rowArr.length;z++){if(yieldlabIds[rowArr[z]]){var newObj={};newObj.size=item.size;newObj.pl=item.pl;newObj.id=yieldlabIds[rowArr[z]];newObj.bidderSize=rowArr[z];//braucht rework\nif(!containsObject(newObj,sizes)){sizes.push(newObj);}//console.log(\"pushing obj\");\n}}}}}}//no sizeMapping\nelse if(!elem.sizeMapping&&elem.size&&Array.isArray(elem.size)){var row=elem.size;//eigene Funktion machen, wird sowohl bei SizeMapping ohne benutzt\nfor(var k=0;k<row.length;k++){var currSize=row[k][0].toString()+\"x\"+row[k][1].toString();if(currSize==item.size){//console.log(\"config in row. pushing to variable\");\nif(sizes.length==0){sizes.push(item);}else if(!sizes.includes(item)){sizes.push(item);}if(sizes.includes(item)){// match YL sizes\nfor(var z=0;z<row.length;z++){var ylcheckSize=row[z][0].toString()+\"x\"+row[z][1].toString();if(yieldlabIds[ylcheckSize]){if(typeof item.id==\"undefined\"){item.id=yieldlabIds[ylcheckSize];item.bidderSize=ylcheckSize;}//falls bereits geschrieben, erstelle neues Objekt.\nelse{var newObj={};newObj.size=item.size;newObj.pl=item.pl;newObj.id=yieldlabIds[ylcheckSize];newObj.bidderSize=ylcheckSize;console.log('second: ',yieldlabIds[rowArr[z]]);sizes.push(newObj);}}}}}}}}});});return createBidderConfigOb(bidder.YIELDLAB,sizes,pageName);};var translate=function translate(input,sspName,ropOrNot){var bidderConfigYL=[];var yieldlabIds=ropOrNot?rop:orNot;switch(sspName){case bidder.ALL:bidderConfigYL.push(criteoTrans(_toConsumableArray(input.config),input.pageName));bidderConfigYL.push(yieldlabTrans(input,yieldlabIds));break;case bidder.YIELDLAB:bidderConfigYL.push(yieldlabTrans(input,yieldlabIds));break;case bidder.CRITEO:bidderConfigYL.push(criteoTrans(_toConsumableArray(input.config),input.pageName));break;}return bidderConfigYL;};function getUnique(arr,comp){var unique=arr.map(function(e){return e[comp];})// store the keys of the unique objects\n.map(function(e,i,final){return final.indexOf(e)===i&&i;})// eliminate the dead keys & store unique objects\n.filter(function(e){return arr[e];}).map(function(e){return arr[e];});return unique;}var configReducer=function configReducer(input,sspName,ropOrNot){var bidderConfigYL=translate(input,sspName,ropOrNot);var preConfig=bidderConfigYL.reduce(function(accumulator,current){if(checkIfAlreadyExist(current)){return accumulator;}else{return accumulator.concat([current]);}function checkIfAlreadyExist(currentVal){return accumulator.some(function(item){return item.size===currentVal.size&&item.id===currentVal.id&&item.pl===currentVal.pl&&item.bidderSize===currentVal.bidderSize;});}},[]);return bidderConfigYL;};var configGeneration=function configGeneration(){var input=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{config:[],slots:[],pageName:\"\"};var sspName=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"criteo\";var ropOrNot=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var preConfig=configReducer(input,sspName,ropOrNot);var beforeReplace=JSON.stringify(preConfig);return beforeReplace;};export{configGeneration};","map":{"version":3,"sources":["/Users/hagen.handtke/Documents/urban_integration/src/services/CGenerationService.js"],"names":["bidder","rop","orNot","sizesInConfig","size","pl","slots","unit","initiallyExpanded","sizeMapping","targeting","pos","containsObject","obj","list","i","length","generateParamAttributes","params","bidderName","pageName","placementnameing","addStringtocall","CRITEO","push","YIELDLAB","createBidderConfigOb","sizes","bidderConfObject","criteoTrans","config","forEach","el","id","yieldlabTrans","input","yieldlabIds","item","elem","abort","indexOf","row","k","currSize","toString","rowArr","rowSize","z","newObj","bidderSize","Array","isArray","includes","ylcheckSize","console","log","translate","sspName","ropOrNot","bidderConfigYL","ALL","getUnique","arr","comp","unique","map","e","final","filter","configReducer","preConfig","reduce","accumulator","current","checkIfAlreadyExist","concat","currentVal","some","configGeneration","beforeReplace","JSON","stringify"],"mappings":"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","sourcesContent":["import { bidder } from './Helper';\n\n\n//ROP\n\nconst rop = {\n    \"120x600\": \"2146125\",\n    \"160x600\": \"2146128\",\n    \"200x600\": \"2146127\",\n    \"300x100\": \"3562558\",\n    \"300x250\": \"2146130\",\n    \"300x250\": \"3562949\",\n    \"300x50\": \"3562561\",\n    \"300x600\": \"2146129\",\n    \"320x100\": \"3561911\",\n    \"320x480\": \"3562349\",\n    \"320x50\": \"3562953\",\n    \"728x90\": \"3889479\",\n    \"800x250\": \"3889481\",\n    \"970x250\": \"2146124\",\n    \"970x90\": \"2146126\"\n}\n\n\n\n//news\nconst orNot = {\n    \"120x600\": \"2227039\",\n    \"160x600\": \"2227040\",\n    \"200x600\": \"2227038\",\n    \"300x100\": \"3562555\",\n    \"300x250\": \"2146133\",\n    \"300x250\": \"3889480\",\n    \"300x50\": \"3563072\",\n    \"300x600\": \"3889482\",\n    \"320x100\": \"2146134\",\n    \"320x480\": \"3562552\",\n    \"320x50\": \"3561904\",\n    \"728x90\": \"2227036\",\n    \"800x250\": \"2227037\",\n    \"970x250\": \"2227035\",\n    \"970x90\": \"2455011\"\n}\n\n//criteo\nvar sizesInConfig = [{\n    size: '300x250',\n    pl: 'medrect1'\n}, {\n    size: '300x250',\n    pl: 'medrect2'\n}, {\n    size: '728x90',\n    pl: 'leader'\n}, {\n    size: '320x100',\n    pl: 'leader'\n}]\n\n\n//hier slot Definitionen rein:\nvar slots = [\n    {\n        unit: \"leaderboard\",\n        initiallyExpanded: true,\n        size: [\n            [728, 90], [300, 50], [300, 100], [320, 50], [320, 100]\n        ],\n        sizeMapping: [\n            [[0, 0], [[300, 50], [300, 100], [320, 50], [320, 100]]],\n            [[601, 0], [[1, 1], [728, 90]]]\n        ],\n        targeting: {\n            pos: \"ATF\"\n        }\n    },\n    {\n        unit: \"medrect1\",\n        initiallyExpanded: true,\n        size: [\n            [300, 250], 'fluid'\n        ],\n        sizeMapping: [\n            [[0, 0], [[300, 50], [300, 250], [300, 100], [320, 50], [320, 100], 'fluid']],\n            [[601, 0], [[1, 1], [300, 250]]]\n        ]\n    },\n    {\n        unit: \"medrect2\",\n        initiallyExpanded: true,\n        size: [\n            [300, 250], 'fluid'\n        ]\n    },\n    {\n        unit: \"post-site-ad\",\n        size: \"out-of-page\"\n    },\n    {\n        unit: \"medrect1-mobile\",\n        initiallyExpanded: true,\n        size: [\n            [300, 250]\n        ],\n        sizeMapping: [\n            [[0, 0], [[300, 250]]],\n            [[768, 0], []]\n        ]\n    }\n]\n\nfunction containsObject(obj, list) {\n    var i;\n    for (i = 0; i < list.length; i++) {\n        if (list[i] === obj) {\n            return true;\n        }\n    }\n    return false;\n}\n\nconst generateParamAttributes = (params, bidderName, pageName) => {\n\n    params.placementnameing = '';\n    params.addStringtocall = [];\n\n    switch (bidderName) {\n\n        case bidder.CRITEO:\n            params.addStringtocall.push(['networkId', 3724], ['publisherSubId', pageName]);\n            break;\n        case bidder.YIELDLAB:\n            params.placementnameing = 'adslotId';\n            params.addStringtocall.push(['supplyId', 2117490], ['extId', pageName]);\n            break;\n    }\n}\nconst createBidderConfigOb = (bidderName, sizes, pageName) => {\n\n    var bidderConfObject = {};\n    var params = {}\n    params.sizes = sizes;\n    generateParamAttributes(params, bidderName, pageName)\n    bidderConfObject.bidder = bidderName;\n    bidderConfObject.params = params;\n\n    return bidderConfObject;\n}\n\nconst criteoTrans = (config, pageName) => {\n    config.forEach(el => {\n        delete el.id;\n    });\n\n    return createBidderConfigOb(bidder.CRITEO, config, pageName);\n}\n\nconst yieldlabTrans = (input, yieldlabIds) => {\n    const { config, slots, pageName } = input;\n    var sizes = [];\n\n    config.forEach(function (item) {\n        //console.log(\"checking \" + item.pl)\n        slots.forEach(\n            function (elem) {\n                var abort = false;\n                if (elem.unit.indexOf(item.pl) > -1) {\n                    //console.log(\"check for elem successful. checking sizes\")\n                    //console.log(elem)\n                    //check for sizeMappings\n                    if (elem.sizeMapping) {\n\n                        for (var i = 0; i < elem.sizeMapping.length && !abort; i++) {\n                            //console.log(\"checking row \"+ (i+1)+\" of \"+elem.sizeMapping.length)\n                            var row = elem.sizeMapping[i][1];\n\n                            //eigene Funktion machen, wird sowohl bei SizeMapping ohne benutzt\n                            for (var k = 0; k < row.length && !abort; k++) {\n                                var currSize = row[k][0].toString() + \"x\" + row[k][1].toString();\n                                if (currSize == item.size) {\n                                    //console.log(\"configSize in row. pushing to variable and abort loop\");\n\n                                    var abort = true;\n                                    var rowArr = []\n                                    row.forEach(function (rowSize) {\n                                        rowArr.push(rowSize[0].toString() + \"x\" + rowSize[1].toString())\n                                    })\n\n                                    for (z = 0; z < rowArr.length; z++) {\n                                        if (yieldlabIds[rowArr[z]]) {\n                                            var newObj = {}\n                                            newObj.size = item.size;\n                                            newObj.pl = item.pl;\n                                            newObj.id = yieldlabIds[rowArr[z]]\n                                            newObj.bidderSize = rowArr[z]\n\n                                            //braucht rework\n                                            if (!containsObject(newObj, sizes)) {\n                                                sizes.push(newObj);\n                                            }\n\n                                            //console.log(\"pushing obj\");\n\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    //no sizeMapping\n                    else if (!elem.sizeMapping && elem.size && Array.isArray(elem.size)) {\n                        var row = elem.size;\n                        //eigene Funktion machen, wird sowohl bei SizeMapping ohne benutzt\n                        for (var k = 0; k < row.length; k++) {\n                            var currSize = row[k][0].toString() + \"x\" + row[k][1].toString();\n                            if (currSize == item.size) {\n                                //console.log(\"config in row. pushing to variable\");\n\n                                if (sizes.length == 0) {\n                                    sizes.push(item)\n                                }\n                                else if (!sizes.includes(item)) {\n                                    sizes.push(item)\n                                }\n\n                                if (sizes.includes(item)) {\n                                    // match YL sizes\n                                    for (var z = 0; z < row.length; z++) {\n                                        var ylcheckSize = row[z][0].toString() + \"x\" + row[z][1].toString();\n                                        if (yieldlabIds[ylcheckSize]) {\n                                            if (typeof item.id == \"undefined\") {\n                                                item.id = yieldlabIds[ylcheckSize];\n                                                item.bidderSize = ylcheckSize;\n                                            }\n                                            //falls bereits geschrieben, erstelle neues Objekt.\n                                            else {\n                                                var newObj = {}\n                                                newObj.size = item.size;\n                                                newObj.pl = item.pl;\n                                                newObj.id = yieldlabIds[ylcheckSize];\n                                                newObj.bidderSize = ylcheckSize;\n                                                console.log('second: ', yieldlabIds[rowArr[z]])\n\n                                                sizes.push(newObj);\n                                            }\n\n                                        }\n                                    }\n                                }\n\n                            }\n                        }\n\n                    }\n\n                }\n            })\n    })\n    return createBidderConfigOb(bidder.YIELDLAB, sizes, pageName);\n}\n\n\n\nconst translate = (input, sspName, ropOrNot) => {\n    var bidderConfigYL = [];\n    const yieldlabIds = ropOrNot ? rop : orNot;\n    switch (sspName) {\n        case bidder.ALL:\n            bidderConfigYL.push(criteoTrans([...input.config], input.pageName));\n            bidderConfigYL.push(yieldlabTrans(input, yieldlabIds));\n            break;\n        case bidder.YIELDLAB:\n            bidderConfigYL.push(yieldlabTrans(input, yieldlabIds));\n            break;\n        case bidder.CRITEO:\n            bidderConfigYL.push(criteoTrans([...input.config], input.pageName));\n            break;\n    }\n\n    return bidderConfigYL;\n}\n\n\nfunction getUnique(arr, comp) {\n\n    const unique = arr\n        .map(e => e[comp])\n\n        // store the keys of the unique objects\n        .map((e, i, final) => final.indexOf(e) === i && i)\n\n        // eliminate the dead keys & store unique objects\n        .filter(e => arr[e]).map(e => arr[e]);\n\n    return unique;\n}\n\nconst configReducer = (input, sspName, ropOrNot) => {\n\n    let bidderConfigYL = translate(input, sspName, ropOrNot);\n    var preConfig = bidderConfigYL.reduce(function (accumulator, current) {\n        if (checkIfAlreadyExist(current)) {\n            return accumulator\n        } else {\n            return accumulator.concat([current]);\n        }\n        function checkIfAlreadyExist(currentVal) {\n            return accumulator.some(function (item) {\n                return (item.size === currentVal.size &&\n                    item.id === currentVal.id &&\n                    item.pl === currentVal.pl &&\n                    item.bidderSize === currentVal.bidderSize\n                );\n            });\n        }\n    }, []);\n\n    return bidderConfigYL;\n}\n\n\nconst configGeneration = (input = { config: [], slots: [], pageName: \"\" }, sspName = \"criteo\", ropOrNot = true) => {\n\n    let preConfig = configReducer(input, sspName, ropOrNot);\n    var beforeReplace = JSON.stringify(preConfig);\n\n    return beforeReplace;\n}\n\n\nexport { configGeneration }"]},"metadata":{},"sourceType":"module"}